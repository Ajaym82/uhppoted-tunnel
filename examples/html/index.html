<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <title>uhppoted-tunnel</title>
    <link rel="manifest"   href="/manifest.json">
    <link rel="icon"       href="/images/favicon.svg">
    <link rel="stylesheet" href="/css/tunnel.css" type="text/css">
    <meta charset="UTF-8">
  </head>
  <body> 
    <div id="content">
      <header>
        <img id="logo" src="/images/logo.png" />
        <h1>UDP Tunnel</h1>
        <div>
          <button onclick="onClear(event)">clear</button>
        </div>
      </header>
    
      <main>
        <div id="command" class="panel">
          <div>
            <button onclick="onCommand('get-all-controllers')">get-all-controllers</button>
            <div class="args"></div>
          </div>
          <div class="command">
            <button onclick="onCommand('get-controller')">get-controller</button>
            <div class="args">
              <input id="controller" type="number" min="1" max="499999999" data-tag="device.id" placeholder="device ID" />
            </div>
          </div>
          <div class="command">
            <button onclick="onCommand('set-IP')">set-IP</button>
            <div class="args">
              <input id="ip-address" type="text" placeholder="IPv4 address" data-tag="IP.address" value="" />
              <input id="subnet" type="text" placeholder="IPv4 subnet mask" data-tag="IP.netmask" value="" />
              <input id="gateway" type="text" placeholder="IPv4 gateway address" data-tag="IP.gateway" value="" />
            </div>
          </div>
          <div class="command">
            <button onclick="onCommand('get-listener')">get-listener</button>
            <div class="args"></div>
          </div>
          <div class="command">
            <button onclick="onCommand('set-listener')">set-listener</button>
            <div class="args">
              <input id="listener" type="text" placeholder="IPv4 address" data-tag="listener" value="" />
            </div>
          </div>
          <div class="command">
            <button onclick="onCommand('get-time')">get-time</button>
            <div class="args"></div>
          </div>
          <div class="command">
            <button onclick="onCommand('set-time')">set-time</button>
            <div class="args">
              <input id="datetime" type="datetime-local" placeholder="" value="" />
            </div>
          </div>
          <div class="command">
            <button onclick="onCommand('get-door-control')">get-door-control</button>
            <div class="args">
              <input id="door" type="number" min="1" max="4" data-tag="door.id" placeholder="door" />
            </div>
          </div>
          <div class="command">
            <button onclick="onCommand('set-door-control')">set-door-control</button>
            <div class="args">
              <input id="mode" type="number" min="1" max="3" data-tag="door.mode" placeholder="door control mode" value="3"/>
              <input id="delay" type="number" min="1" max="60" data-tag="door.delay" placeholder="door delay" value="5" />
            </div>
          </div>
          <div class="command">
            <button onclick="onCommand('get-status')">get-status</button>
            <div class="args"></div>
          </div>
        </div>

        <div id="response" class="panel">
          <textarea></textarea>
        </div>

        <fieldset id="request" class="panel">
          <legend>Request</legend>
          <textarea></textarea>
        </fieldset>

        <fieldset id="reply" class="panel">
          <legend>Reply</legend>
          <textarea></textarea>
        </fieldset>
      </main>
    
      <footer>
        <p id="message"></p>
      </footer>
    </div>
  </body>

  <script type="module">
    import { 
      initialise,
      exec, 
      clear,
    } from './javascript/main.js'

    window.exec = exec
    window.clear = clear

    initialise()

  </script>

  <script>
    function onCommand(cmd) {
      exec(cmd)
    }

    function onClear(event) {
      clear()
    }
  </script>

</html>